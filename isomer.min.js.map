{"version":3,"file":"isomer.min.js","sources":["isomer.js"],"names":["Layer","z","this","items","map","world","World","options","canvas","ctx","getContext","webkitspritesmoothingEnabled","width","height","cell","cx","cy","center","x","y","projection","project","layers","_changed","init","Item","sprite","sx","sy","animations","_discovered","Block","call","Player","Animation","item","props","interval","callback","frames","startX","startY","startZ","start","prototype","has","indexOf","render","lx","rx","ly","ry","i","len","length","neighbors","player","globalAlpha","covers","animation","add","insert","push","pos","search","compare","splice","get","remove","index","sort","a","b","needle","stack","comparator","j","middle","cmp","self","onframe","window","webkitRequestAnimationFrame","RequestAnimationFrame","Math","round","save","clearRect","translate","random","restore","layer","getLayer","addLayer","setPlayer","setCenter","handleMove","position","offset","w","h","move","dx","dy","dz","dist","animate","first","Date","now","run","shift","end","reset","Object","create","constructor","drawImage","command","cmd","names","name","hasOwnProperty","percent","frame"],"mappings":"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"}